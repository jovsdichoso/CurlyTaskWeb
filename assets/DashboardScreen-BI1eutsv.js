import{c as m,r as h,u as Ae,a as Ve,j as e,l as Ke,L as Q}from"./index-9BDDIx7r.js";import{g as Oe,o as Me,d as U,e as T,f as ie,U as ee,h as Je,a as ne,C as Qe,i as W,B as We,H as Xe,u as Ze,q as et,j as tt,w as st,k as de,l as at,m as rt,n as nt}from"./firebase-CA3PzlW4.js";const ot=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],X=m("brain",ot);const it=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Re=m("briefcase",it);const lt=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],te=m("calendar",lt);const dt=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ct=m("camera",dt);const ut=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ht=m("chevron-right",ut);const xt=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gt=m("circle-check-big",xt);const pt=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],ft=m("cloud-upload",pt);const bt=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],mt=m("coffee",bt);const yt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],kt=m("external-link",yt);const vt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Z=m("file-text",vt);const jt=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Nt=m("flag",jt);const wt=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Te=m("graduation-cap",wt);const Ct=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],De=m("hash",Ct);const _t=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Et=m("house",_t);const zt=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],St=m("log-out",zt);const It=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],At=m("mail",It);const Ot=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Mt=m("menu",Ot);const Rt=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Tt=m("moon",Rt);const Dt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Le=m("panels-top-left",Dt);const Lt=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],$t=m("paperclip",Lt);const Ut=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qt=m("pen",Ut);const Ft=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oe=m("plus",Ft);const Ht=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Gt=m("refresh-cw",Ht);const Pt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$e=m("save",Pt);const Bt=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Yt=m("settings",Bt);const Vt=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Kt=m("shield",Vt);const Jt=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],re=m("sparkles",Jt);const Qt=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ue=m("square-check-big",Qt);const Wt=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Xt=m("star",Wt);const Zt=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],es=m("sun",Zt);const ts=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],G=m("trash-2",ts);const ss=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],as=m("triangle-alert",ss);const rs=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ns=m("trophy",rs);const os=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],is=m("type",os);const ls=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],se=m("x",ls);const ds=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],cs=m("zap",ds),us=({isOpen:t,onClose:a,onOpenProfile:s})=>{const[r,n]=h.useState(()=>{const I=localStorage.getItem("theme");return I==="dark"||I===null}),[o,l]=h.useState(null),[d,u]=h.useState(null),y=Ae(),b=Ve(),k=Oe();h.useEffect(()=>{r?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[r]),h.useEffect(()=>{const I=Me(k,async z=>{if(l(z),z)try{const O=U(T,"users",z.uid),S=await ie(O);S.exists()&&u(S.data())}catch(O){console.error("Error fetching user profile:",O)}else u(null)});return()=>I()},[]);const x=()=>n(!r),c=async()=>{localStorage.removeItem("cached_tasks"),await Je(k),y("/login")},f=d?.username||o?.displayName||"User",N=d?.photoURL||o?.photoURL,E=d?.email||o?.email;return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{onClick:a,className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm transition-opacity"}),e.jsxs("aside",{className:`
                    fixed inset-y-0 left-0 z-50 w-72 bg-white dark:bg-zinc-950 border-r border-gray-200 dark:border-zinc-800 
                    flex flex-col transition-transform duration-300 ease-in-out
                    md:relative md:translate-x-0
                    ${t?"translate-x-0":"-translate-x-full"}
                `,children:[e.jsxs("div",{className:"p-8 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:Ke,alt:"CurlyTask Logo",className:"w-10 h-10 object-contain"}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-xl tracking-tight text-gray-900 dark:text-white leading-none",children:"CurlyTask"}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Workspace"})]})]}),e.jsx("button",{onClick:a,className:"md:hidden text-gray-500 hover:text-gray-900 dark:hover:text-white",children:e.jsx(se,{size:24})})]}),e.jsxs("nav",{className:"flex-1 px-4 space-y-2",children:[e.jsx("p",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 mt-4",children:"Menu"}),e.jsx(ce,{icon:e.jsx(Et,{size:20}),label:"Dashboard",isActive:b.pathname==="/dashboard",onClick:()=>{y("/dashboard"),a()}}),e.jsx(ce,{icon:e.jsx(Yt,{size:20}),label:"Profile",isActive:!1,onClick:()=>{s(),a()}})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-zinc-800",children:[e.jsxs("button",{onClick:s,className:"w-full flex items-center gap-3 p-3 mb-4 rounded-2xl bg-gray-50 dark:bg-zinc-900 border border-gray-100 dark:border-zinc-800 hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-teal-100 dark:bg-teal-900/30 flex items-center justify-center text-teal-600 dark:text-teal-400 overflow-hidden shrink-0",children:N?e.jsx("img",{src:N,alt:"User",className:"w-full h-full object-cover"}):e.jsx(ee,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:f}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:E})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:x,className:"flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl text-gray-600 dark:text-zinc-400 bg-gray-50 dark:bg-zinc-900 hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[r?e.jsx(es,{size:18}):e.jsx(Tt,{size:18}),e.jsx("span",{className:"text-xs font-bold",children:r?"Light":"Dark"})]}),e.jsxs("button",{onClick:c,className:"flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl text-red-500 bg-red-50 dark:bg-red-900/10 hover:bg-red-100 dark:hover:bg-red-900/20 transition-colors",children:[e.jsx(St,{size:18}),e.jsx("span",{className:"text-xs font-bold",children:"Logout"})]})]})]})]})]})},ce=({icon:t,label:a,isActive:s,onClick:r})=>e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-200 group relative
        ${s?"bg-teal-50 text-teal-700 dark:bg-teal-500/10 dark:text-teal-400":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-900"}`,children:[s&&e.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-8 w-1 bg-teal-600 rounded-r-full"}),e.jsx("span",{className:s?"text-teal-600 dark:text-teal-400":"group-hover:text-gray-900 dark:group-hover:text-zinc-200",children:t}),e.jsx("span",{className:"text-sm font-medium",children:a})]}),hs=({task:t,onDelete:a,onClick:s})=>{const r=(u,y)=>{const b={size:22,className:"text-teal-600 dark:text-teal-400"};if(u==="brain")return e.jsx(X,{...b,className:"text-purple-600 dark:text-purple-400"});if(u==="document-text")return e.jsx(Z,{...b});if(u==="star")return e.jsx(Xt,{...b});if(u==="zap")return e.jsx(cs,{...b});if(u==="coffee")return e.jsx(mt,{...b});switch(y){case"Work":return e.jsx(Re,{...b,className:"text-blue-600 dark:text-blue-400"});case"Personal":return e.jsx(ee,{...b,className:"text-purple-600 dark:text-purple-400"});case"Academic":return e.jsx(Te,{...b,className:"text-orange-600 dark:text-orange-400"});default:return e.jsx(Le,{...b,className:"text-gray-600 dark:text-gray-400"})}},n=u=>{switch(u){case"high":return"bg-rose-50 text-rose-700 border-rose-100 dark:bg-rose-500/10 dark:text-rose-300 dark:border-rose-900/50";case"medium":return"bg-amber-50 text-amber-700 border-amber-100 dark:bg-amber-500/10 dark:text-amber-300 dark:border-amber-900/50";case"low":return"bg-blue-50 text-blue-700 border-blue-100 dark:bg-blue-500/10 dark:text-blue-300 dark:border-blue-900/50";default:return"bg-gray-50 text-gray-700 border-gray-100"}},o=t.checklist?t.checklist.length:0,l=t.checklist?t.checklist.filter(u=>u.isChecked).length:0,d=o===0?0:Math.round(l/o*100);return e.jsxs("div",{onClick:s,className:"group relative bg-white dark:bg-zinc-900 rounded-[20px] p-4 border border-gray-100 dark:border-zinc-800 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-50 dark:bg-zinc-800 rounded-xl flex items-center justify-center border border-gray-100 dark:border-zinc-700",children:r(t.emoji,t.category)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-zinc-800 rounded-md flex items-center gap-1 text-[9px] font-mono text-gray-500 border border-gray-200 dark:border-zinc-700",children:[e.jsx(De,{size:8}),t.id.substring(0,6).toUpperCase()]}),e.jsx("button",{onClick:u=>{u.stopPropagation(),a(t.id)},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all",children:e.jsx(G,{size:14})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:`text-sm font-bold text-gray-900 dark:text-white mb-1 line-clamp-1 ${t.completed&&"line-through text-gray-400"}`,children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 line-clamp-2 leading-relaxed h-8",children:t.description||"No additional details provided."})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-4",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-md text-[9px] font-extrabold uppercase tracking-wide border ${n(t.priority)}`,children:t.priority}),t.quizDataJson&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-md text-[9px] font-bold uppercase tracking-wide bg-purple-50 text-purple-700 border border-purple-100 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-900",children:[e.jsx(X,{size:9}),"Quiz"]}),(t.pdfUrl||t.hasAttachment)&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-md text-[9px] font-bold uppercase tracking-wide bg-teal-50 text-teal-700 border border-teal-100 dark:bg-teal-900/20 dark:text-teal-400 dark:border-teal-900",children:[e.jsx($t,{size:9}),"File"]})]}),o>0&&e.jsxs("div",{className:"mb-3 bg-gray-50 dark:bg-zinc-800/50 p-2.5 rounded-lg border border-gray-100 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex justify-between items-end mb-1",children:[e.jsx("span",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-wider",children:"Progress"}),e.jsxs("span",{className:"text-[10px] font-bold text-teal-600 dark:text-teal-400",children:[d,"%"]})]}),e.jsx("div",{className:"h-1 w-full bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-teal-500 rounded-full transition-all duration-500",style:{width:`${d}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-50 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400 dark:text-zinc-500",children:[e.jsx(te,{size:12}),e.jsx("span",{className:"text-[10px] font-semibold",children:t.dueDate||"No Date"})]}),e.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-100 dark:bg-indigo-900/30 border-2 border-white dark:border-zinc-900 flex items-center justify-center text-[8px] font-bold text-indigo-600 dark:text-indigo-400",children:"Me"})]})]})};var ue;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(ue||(ue={}));var he;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(he||(he={}));var xe;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(xe||(xe={}));const ge=["user","model","function","system"];var pe;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(pe||(pe={}));var fe;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(fe||(fe={}));var be;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(be||(be={}));var me;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(me||(me={}));var H;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(H||(H={}));var ye;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(ye||(ye={}));var ke;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(ke||(ke={}));var ve;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ve||(ve={}));class A extends Error{constructor(a){super(`[GoogleGenerativeAI Error]: ${a}`)}}class F extends A{constructor(a,s){super(a),this.response=s}}class qe extends A{constructor(a,s,r,n){super(a),this.status=s,this.statusText=r,this.errorDetails=n}}class $ extends A{}class Fe extends A{}const xs="https://generativelanguage.googleapis.com",gs="v1beta",ps="0.24.1",fs="genai-js";var q;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(q||(q={}));class bs{constructor(a,s,r,n,o){this.model=a,this.task=s,this.apiKey=r,this.stream=n,this.requestOptions=o}toString(){var a,s;const r=((a=this.requestOptions)===null||a===void 0?void 0:a.apiVersion)||gs;let o=`${((s=this.requestOptions)===null||s===void 0?void 0:s.baseUrl)||xs}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function ms(t){const a=[];return t?.apiClient&&a.push(t.apiClient),a.push(`${fs}/${ps}`),a.join(" ")}async function ys(t){var a;const s=new Headers;s.append("Content-Type","application/json"),s.append("x-goog-api-client",ms(t.requestOptions)),s.append("x-goog-api-key",t.apiKey);let r=(a=t.requestOptions)===null||a===void 0?void 0:a.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(n){throw new $(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${n.message}`)}for(const[n,o]of r.entries()){if(n==="x-goog-api-key")throw new $(`Cannot set reserved header name ${n}`);if(n==="x-goog-api-client")throw new $(`Header name ${n} can only be set using the apiClient field`);s.append(n,o)}}return s}async function ks(t,a,s,r,n,o){const l=new bs(t,a,s,r,o);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},ws(o)),{method:"POST",headers:await ys(l),body:n})}}async function Y(t,a,s,r,n,o={},l=fetch){const{url:d,fetchOptions:u}=await ks(t,a,s,r,n,o);return vs(d,u,l)}async function vs(t,a,s=fetch){let r;try{r=await s(t,a)}catch(n){js(n,t)}return r.ok||await Ns(r,t),r}function js(t,a){let s=t;throw s.name==="AbortError"?(s=new Fe(`Request aborted when fetching ${a.toString()}: ${t.message}`),s.stack=t.stack):t instanceof qe||t instanceof $||(s=new A(`Error fetching from ${a.toString()}: ${t.message}`),s.stack=t.stack),s}async function Ns(t,a){let s="",r;try{const n=await t.json();s=n.error.message,n.error.details&&(s+=` ${JSON.stringify(n.error.details)}`,r=n.error.details)}catch{}throw new qe(`Error fetching from ${a.toString()}: [${t.status} ${t.statusText}] ${s}`,t.status,t.statusText,r)}function ws(t){const a={};if(t?.signal!==void 0||t?.timeout>=0){const s=new AbortController;t?.timeout>=0&&setTimeout(()=>s.abort(),t.timeout),t?.signal&&t.signal.addEventListener("abort",()=>{s.abort()}),a.signal=s.signal}return a}function le(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),J(t.candidates[0]))throw new F(`${L(t)}`,t);return Cs(t)}else if(t.promptFeedback)throw new F(`Text not available. ${L(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),J(t.candidates[0]))throw new F(`${L(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),je(t)[0]}else if(t.promptFeedback)throw new F(`Function call not available. ${L(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),J(t.candidates[0]))throw new F(`${L(t)}`,t);return je(t)}else if(t.promptFeedback)throw new F(`Function call not available. ${L(t)}`,t)},t}function Cs(t){var a,s,r,n;const o=[];if(!((s=(a=t.candidates)===null||a===void 0?void 0:a[0].content)===null||s===void 0)&&s.parts)for(const l of(n=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||n===void 0?void 0:n.parts)l.text&&o.push(l.text),l.executableCode&&o.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&o.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function je(t){var a,s,r,n;const o=[];if(!((s=(a=t.candidates)===null||a===void 0?void 0:a[0].content)===null||s===void 0)&&s.parts)for(const l of(n=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||n===void 0?void 0:n.parts)l.functionCall&&o.push(l.functionCall);if(o.length>0)return o}const _s=[H.RECITATION,H.SAFETY,H.LANGUAGE];function J(t){return!!t.finishReason&&_s.includes(t.finishReason)}function L(t){var a,s,r;let n="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)n+="Response was blocked",!((a=t.promptFeedback)===null||a===void 0)&&a.blockReason&&(n+=` due to ${t.promptFeedback.blockReason}`),!((s=t.promptFeedback)===null||s===void 0)&&s.blockReasonMessage&&(n+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const o=t.candidates[0];J(o)&&(n+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(n+=`: ${o.finishMessage}`))}return n}function P(t){return this instanceof P?(this.v=t,this):new P(t)}function Es(t,a,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(t,a||[]),n,o=[];return n={},l("next"),l("throw"),l("return"),n[Symbol.asyncIterator]=function(){return this},n;function l(x){r[x]&&(n[x]=function(c){return new Promise(function(f,N){o.push([x,c,f,N])>1||d(x,c)})})}function d(x,c){try{u(r[x](c))}catch(f){k(o[0][3],f)}}function u(x){x.value instanceof P?Promise.resolve(x.value.v).then(y,b):k(o[0][2],x)}function y(x){d("next",x)}function b(x){d("throw",x)}function k(x,c){x(c),o.shift(),o.length&&d(o[0][0],o[0][1])}}const Ne=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function zs(t){const a=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),s=As(a),[r,n]=s.tee();return{stream:Is(r),response:Ss(n)}}async function Ss(t){const a=[],s=t.getReader();for(;;){const{done:r,value:n}=await s.read();if(r)return le(Os(a));a.push(n)}}function Is(t){return Es(this,arguments,function*(){const s=t.getReader();for(;;){const{value:r,done:n}=yield P(s.read());if(n)break;yield yield P(le(r))}})}function As(t){const a=t.getReader();return new ReadableStream({start(r){let n="";return o();function o(){return a.read().then(({value:l,done:d})=>{if(d){if(n.trim()){r.error(new A("Failed to parse stream"));return}r.close();return}n+=l;let u=n.match(Ne),y;for(;u;){try{y=JSON.parse(u[1])}catch{r.error(new A(`Error parsing JSON response: "${u[1]}"`));return}r.enqueue(y),n=n.substring(u[0].length),u=n.match(Ne)}return o()}).catch(l=>{let d=l;throw d.stack=l.stack,d.name==="AbortError"?d=new Fe("Request aborted when reading from the stream"):d=new A("Error reading from the stream"),d})}}})}function Os(t){const a=t[t.length-1],s={promptFeedback:a?.promptFeedback};for(const r of t){if(r.candidates){let n=0;for(const o of r.candidates)if(s.candidates||(s.candidates=[]),s.candidates[n]||(s.candidates[n]={index:n}),s.candidates[n].citationMetadata=o.citationMetadata,s.candidates[n].groundingMetadata=o.groundingMetadata,s.candidates[n].finishReason=o.finishReason,s.candidates[n].finishMessage=o.finishMessage,s.candidates[n].safetyRatings=o.safetyRatings,o.content&&o.content.parts){s.candidates[n].content||(s.candidates[n].content={role:o.content.role||"user",parts:[]});const l={};for(const d of o.content.parts)d.text&&(l.text=d.text),d.functionCall&&(l.functionCall=d.functionCall),d.executableCode&&(l.executableCode=d.executableCode),d.codeExecutionResult&&(l.codeExecutionResult=d.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),s.candidates[n].content.parts.push(l)}n++}r.usageMetadata&&(s.usageMetadata=r.usageMetadata)}return s}async function He(t,a,s,r){const n=await Y(a,q.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(s),r);return zs(n)}async function Ge(t,a,s,r){const o=await(await Y(a,q.GENERATE_CONTENT,t,!1,JSON.stringify(s),r)).json();return{response:le(o)}}function Pe(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function B(t){let a=[];if(typeof t=="string")a=[{text:t}];else for(const s of t)typeof s=="string"?a.push({text:s}):a.push(s);return Ms(a)}function Ms(t){const a={role:"user",parts:[]},s={role:"function",parts:[]};let r=!1,n=!1;for(const o of t)"functionResponse"in o?(s.parts.push(o),n=!0):(a.parts.push(o),r=!0);if(r&&n)throw new A("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!n)throw new A("No content is provided for sending chat message.");return r?a:s}function Rs(t,a){var s;let r={model:a?.model,generationConfig:a?.generationConfig,safetySettings:a?.safetySettings,tools:a?.tools,toolConfig:a?.toolConfig,systemInstruction:a?.systemInstruction,cachedContent:(s=a?.cachedContent)===null||s===void 0?void 0:s.name,contents:[]};const n=t.generateContentRequest!=null;if(t.contents){if(n)throw new $("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(n)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const o=B(t);r.contents=[o]}return{generateContentRequest:r}}function we(t){let a;return t.contents?a=t:a={contents:[B(t)]},t.systemInstruction&&(a.systemInstruction=Pe(t.systemInstruction)),a}function Ts(t){return typeof t=="string"||Array.isArray(t)?{content:B(t)}:t}const Ce=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Ds={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Ls(t){let a=!1;for(const s of t){const{role:r,parts:n}=s;if(!a&&r!=="user")throw new A(`First content should be with role 'user', got ${r}`);if(!ge.includes(r))throw new A(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(ge)}`);if(!Array.isArray(n))throw new A("Content should have 'parts' property with an array of Parts");if(n.length===0)throw new A("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of n)for(const u of Ce)u in d&&(o[u]+=1);const l=Ds[r];for(const d of Ce)if(!l.includes(d)&&o[d]>0)throw new A(`Content with role '${r}' can't contain '${d}' part`);a=!0}}function _e(t){var a;if(t.candidates===void 0||t.candidates.length===0)return!1;const s=(a=t.candidates[0])===null||a===void 0?void 0:a.content;if(s===void 0||s.parts===void 0||s.parts.length===0)return!1;for(const r of s.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const Ee="SILENT_ERROR";class $s{constructor(a,s,r,n={}){this.model=s,this.params=r,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=a,r?.history&&(Ls(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(a,s={}){var r,n,o,l,d,u;await this._sendPromise;const y=B(a),b={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,y]},k=Object.assign(Object.assign({},this._requestOptions),s);let x;return this._sendPromise=this._sendPromise.then(()=>Ge(this._apiKey,this.model,b,k)).then(c=>{var f;if(_e(c.response)){this._history.push(y);const N=Object.assign({parts:[],role:"model"},(f=c.response.candidates)===null||f===void 0?void 0:f[0].content);this._history.push(N)}else{const N=L(c.response);N&&console.warn(`sendMessage() was unsuccessful. ${N}. Inspect response object for details.`)}x=c}).catch(c=>{throw this._sendPromise=Promise.resolve(),c}),await this._sendPromise,x}async sendMessageStream(a,s={}){var r,n,o,l,d,u;await this._sendPromise;const y=B(a),b={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,y]},k=Object.assign(Object.assign({},this._requestOptions),s),x=He(this._apiKey,this.model,b,k);return this._sendPromise=this._sendPromise.then(()=>x).catch(c=>{throw new Error(Ee)}).then(c=>c.response).then(c=>{if(_e(c)){this._history.push(y);const f=Object.assign({},c.candidates[0].content);f.role||(f.role="model"),this._history.push(f)}else{const f=L(c);f&&console.warn(`sendMessageStream() was unsuccessful. ${f}. Inspect response object for details.`)}}).catch(c=>{c.message!==Ee&&console.error(c)}),x}}async function Us(t,a,s,r){return(await Y(a,q.COUNT_TOKENS,t,!1,JSON.stringify(s),r)).json()}async function qs(t,a,s,r){return(await Y(a,q.EMBED_CONTENT,t,!1,JSON.stringify(s),r)).json()}async function Fs(t,a,s,r){const n=s.requests.map(l=>Object.assign(Object.assign({},l),{model:a}));return(await Y(a,q.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:n}),r)).json()}class ze{constructor(a,s,r={}){this.apiKey=a,this._requestOptions=r,s.model.includes("/")?this.model=s.model:this.model=`models/${s.model}`,this.generationConfig=s.generationConfig||{},this.safetySettings=s.safetySettings||[],this.tools=s.tools,this.toolConfig=s.toolConfig,this.systemInstruction=Pe(s.systemInstruction),this.cachedContent=s.cachedContent}async generateContent(a,s={}){var r;const n=we(a),o=Object.assign(Object.assign({},this._requestOptions),s);return Ge(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},n),o)}async generateContentStream(a,s={}){var r;const n=we(a),o=Object.assign(Object.assign({},this._requestOptions),s);return He(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},n),o)}startChat(a){var s;return new $s(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},a),this._requestOptions)}async countTokens(a,s={}){const r=Rs(a,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),s);return Us(this.apiKey,this.model,r,n)}async embedContent(a,s={}){const r=Ts(a),n=Object.assign(Object.assign({},this._requestOptions),s);return qs(this.apiKey,this.model,r,n)}async batchEmbedContents(a,s={}){const r=Object.assign(Object.assign({},this._requestOptions),s);return Fs(this.apiKey,this.model,a,r)}}class Hs{constructor(a){this.apiKey=a}getGenerativeModel(a,s){if(!a.model)throw new A("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ze(this.apiKey,a,s)}getGenerativeModelFromCachedContent(a,s,r){if(!a.name)throw new $("Cached content must contain a `name` field.");if(!a.model)throw new $("Cached content must contain a `model` field.");const n=["model","systemInstruction"];for(const l of n)if(s?.[l]&&a[l]&&s?.[l]!==a[l]){if(l==="model"){const d=s.model.startsWith("models/")?s.model.replace("models/",""):s.model,u=a.model.startsWith("models/")?a.model.replace("models/",""):a.model;if(d===u)continue}throw new $(`Different value for "${l}" specified in modelParams (${s[l]}) and cachedContent (${a[l]})`)}const o=Object.assign(Object.assign({},s),{model:a.model,tools:a.tools,toolConfig:a.toolConfig,systemInstruction:a.systemInstruction,cachedContent:a});return new ze(this.apiKey,o,r)}}const Gs="https://api.cloudinary.com/v1_1/du1dwcrhb/raw/upload",Ps="tasks_pdfs",Bs=({isOpen:t,onClose:a,onSave:s})=>{const[r,n]=h.useState(""),[o,l]=h.useState(""),[d,u]=h.useState("medium"),[y,b]=h.useState("Work"),[k,x]=h.useState(""),[c,f]=h.useState(null),[N,E]=h.useState(!1),[I,z]=h.useState(!1),[O,S]=h.useState("");if(!t)return null;const R=[{id:"Work",icon:e.jsx(Re,{size:16}),color:"border-blue-200 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-900"},{id:"Personal",icon:e.jsx(ee,{size:16}),color:"border-purple-200 bg-purple-50 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-900"},{id:"Academic",icon:e.jsx(Te,{size:16}),color:"border-orange-200 bg-orange-50 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400 dark:border-orange-900"}],p=i=>{i.target.files&&i.target.files[0]&&(f(i.target.files[0]),E(!0))},C=()=>{f(null),E(!1)},v=async()=>{try{const i=U(T,"app_config","api_keys"),w=await ie(i);return w.exists()?w.data().gemini_key:null}catch(i){return console.error("Error fetching API Key:",i),null}},j=async i=>{const w=new FormData;w.append("file",i),w.append("upload_preset",Ps);try{return(await(await fetch(Gs,{method:"POST",body:w})).json()).secure_url}catch(M){return console.error("Upload failed:",M),null}},_=async i=>{try{if(!i)return null;const w=await v();if(!w)return alert("AI Service is unavailable."),null;const D=new Hs(w).getGenerativeModel({model:"gemini-2.5-flash"});let V=`
                You are a quiz generator. Analyze the content and generate exactly 20 questions in this specific breakdown:
                
                1. 10 Multiple Choice Questions (type: "multiple_choice")
                2. 5 Identification Questions (type: "identification") - The user must type the answer.
                3. 5 Situational/Application Questions (type: "situational") - Scenario-based multiple choice.

                The output MUST be a valid JSON array of objects. Follow this structure strictly:
                [
                    {
                        "type": "multiple_choice", 
                        "question": "Standard multiple choice question?",
                        "options": ["A", "B", "C", "D"],
                        "correct_answer": "A" 
                    },
                    {
                        "type": "identification",
                        "question": "What is the specific term for...?",
                        "options": [], 
                        "correct_answer": "The Answer"
                    },
                    {
                        "type": "situational",
                        "question": "You observe X happening. What is the best course of action?",
                        "options": ["Action A", "Action B", "Action C"],
                        "correct_answer": "Action B"
                    }
                ]
                Do not wrap in markdown code blocks. Return ONLY the raw JSON.
            `;const K=await new Promise(Ye=>{const ae=new FileReader;ae.onloadend=()=>Ye(ae.result.split(",")[1]),ae.readAsDataURL(i)}),Be=(await(await D.generateContent([{inlineData:{data:K,mimeType:i.type||"application/pdf"}},{text:V}])).response).text().replace(/```json|```/g,"").trim();return JSON.parse(Be)}catch(w){return console.error("AI Generation Error:",w),null}},g=async i=>{if(i.preventDefault(),!!r.trim()){z(!0);try{let w="",M=null;c&&(S("Uploading PDF..."),w=await j(c)),N&&c&&(S("Analyzing PDF & Generating Quiz..."),M=await _(c)),S("Saving...");const D=k?new Date(k):new Date;s({title:r,description:o,priority:d,category:y,dueDate:D.toLocaleDateString("en-US",{month:"short",day:"numeric"}),dueTimestamp:D,userId:ne.currentUser?.uid,checklist:[],completed:!1,emoji:M?"brain":c?"document-text":"layout",pdfUrl:w,pdfName:c?c.name:"",hasAttachment:!!c,quizDataJson:M?JSON.stringify(M):null,quizAnswers:{},quizScore:null,quizCompleted:!1}),n(""),l(""),b("Work"),x(""),f(null),E(!1),a()}catch{alert("Error saving task.")}finally{z(!1),S("")}}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-md p-4 transition-all",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-950 w-full max-w-xl rounded-[24px] shadow-2xl border border-gray-100 dark:border-zinc-800 overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-zinc-800 flex items-center justify-between bg-white dark:bg-zinc-950 z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white tracking-tight",children:"Create Task"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Add a new item to your workspace"})]}),e.jsx("button",{onClick:a,className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-50 dark:bg-zinc-900 text-gray-500 hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:e.jsx(se,{size:16})})]}),e.jsxs("div",{className:"overflow-y-auto p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Task Name"}),e.jsx("input",{type:"text",value:r,onChange:i=>n(i.target.value),className:"w-full text-sm px-4 py-3 rounded-xl bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 outline-none transition-all placeholder:text-gray-400",placeholder:"e.g., Q3 Financial Report",autoFocus:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Category"}),e.jsx("div",{className:"flex gap-2",children:R.map(i=>e.jsxs("button",{type:"button",onClick:()=>b(i.id),className:`flex-1 py-2.5 rounded-lg flex items-center justify-center gap-1.5 border transition-all duration-200
                                            ${y===i.id?i.color+" ring-1 ring-inset ring-current shadow-sm":"bg-white dark:bg-zinc-900 border-gray-200 dark:border-zinc-800 text-gray-400 hover:bg-gray-50"}`,children:[i.icon,e.jsx("span",{className:"text-xs font-semibold",children:i.id})]},i.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Due Date"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-teal-500 transition-colors",children:e.jsx(te,{size:14})}),e.jsx("input",{type:"date",value:k,onChange:i=>x(i.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-lg bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 text-gray-900 dark:text-white text-xs focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition-all cursor-pointer font-medium"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Priority"}),e.jsx("div",{className:"bg-gray-50 dark:bg-zinc-900 p-1 rounded-lg border border-gray-200 dark:border-zinc-800 flex flex-col gap-1",children:["high","medium","low"].map(i=>e.jsxs("button",{type:"button",onClick:()=>u(i),className:`py-1.5 px-3 rounded-md text-xs font-medium capitalize transition-all text-left flex items-center justify-between
                                            ${d===i?"bg-white dark:bg-zinc-800 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:[i,d===i&&e.jsx(Nt,{size:12,className:i==="high"?"text-rose-500":i==="medium"?"text-amber-500":"text-blue-500"})]},i))})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Description"}),e.jsx("textarea",{value:o,onChange:i=>l(i.target.value),className:"w-full h-full min-h-[100px] px-4 py-3 rounded-xl bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 outline-none resize-none text-xs leading-relaxed",placeholder:"Add notes (e.g., study material)."})]})]}),e.jsxs("div",{className:`mt-2 p-4 rounded-xl border flex items-center justify-between transition-all duration-300
                        ${c?"bg-gray-50 dark:bg-zinc-900/50 border-gray-100 dark:border-zinc-800":"bg-gray-50/50 dark:bg-zinc-900/30 border-gray-100 dark:border-zinc-800 opacity-60 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${N?"bg-purple-100 dark:bg-purple-900/30 text-purple-600":"bg-gray-200 dark:bg-zinc-800 text-gray-400"}`,children:e.jsx(re,{size:18,className:N?"animate-pulse":""})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 dark:text-white flex items-center gap-2",children:["Generate AI Quiz",!c&&e.jsx("span",{className:"text-[9px] bg-gray-200 dark:bg-zinc-800 px-1.5 py-0.5 rounded text-gray-500 font-bold uppercase",children:"PDF Required"})]}),e.jsx("p",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:c?"Create 20 questions from the uploaded file.":"Upload a file to enable quiz generation."})]})]}),e.jsx("button",{type:"button",disabled:!c,onClick:()=>E(!N),className:`relative w-12 h-7 rounded-full transition-colors duration-200 ease-in-out focus:outline-none 
                                ${c?N?"bg-purple-600":"bg-gray-300 dark:bg-zinc-700":"cursor-not-allowed bg-gray-200 dark:bg-zinc-800"}
                            `,children:e.jsx("span",{className:`absolute left-1 top-1 w-5 h-5 bg-white rounded-full transition-transform duration-200 ease-in-out shadow-sm ${N?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Attachments"}),c&&N&&e.jsxs("span",{className:"text-[9px] font-bold text-purple-500 bg-purple-50 dark:bg-purple-900/20 px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(re,{size:10})," AI Ready"]})]}),c?e.jsxs("div",{className:"flex items-center justify-between w-full p-3 rounded-xl bg-teal-50 dark:bg-teal-900/20 border border-teal-100 dark:border-teal-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white dark:bg-teal-900 flex items-center justify-center text-teal-600",children:e.jsx(Z,{size:16})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-teal-900 dark:text-teal-100 line-clamp-1",children:c.name}),e.jsx("span",{className:"text-[10px] text-teal-600/80",children:N?"AI will analyze this PDF":"File attached"})]})]}),e.jsx("button",{type:"button",onClick:C,className:"p-1.5 rounded-lg hover:bg-white/50 text-teal-700",children:e.jsx(G,{size:14})})]}):e.jsxs("label",{className:"group flex flex-col items-center justify-center w-full h-24 rounded-xl border-2 border-dashed border-gray-200 dark:border-zinc-800 bg-gray-50/50 dark:bg-zinc-900/50 hover:bg-teal-50/50 dark:hover:bg-teal-900/10 hover:border-teal-400 dark:hover:border-teal-600 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-3 pb-4",children:[e.jsx(ft,{size:18,className:"text-gray-400 group-hover:text-teal-500 mb-2 transition-colors"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 font-medium",children:e.jsx("span",{className:"font-bold text-teal-600 group-hover:underline",children:"Click to upload"})})]}),e.jsx("input",{type:"file",className:"hidden",onChange:p,accept:".pdf,.jpg,.png"})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 dark:border-zinc-800 bg-gray-50/50 dark:bg-zinc-900/50 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-5 py-2.5 rounded-xl text-xs font-bold text-gray-600 dark:text-zinc-400 hover:bg-white dark:hover:bg-zinc-800 transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",onClick:g,disabled:I,className:`px-6 py-2.5 text-white text-xs font-bold rounded-xl transition-all shadow-lg flex items-center gap-2 disabled:opacity-70 disabled:cursor-wait
                            ${N?"bg-purple-600 hover:bg-purple-700 shadow-purple-600/20":"bg-teal-600 hover:bg-teal-700 shadow-teal-600/20"}
                        `,children:I?e.jsxs(e.Fragment,{children:[e.jsx(Q,{size:14,className:"animate-spin"}),e.jsx("span",{children:O||"Processing..."})]}):e.jsxs(e.Fragment,{children:[N?e.jsx(re,{size:14}):e.jsx(Ue,{size:14}),e.jsx("span",{children:N?"Create & Generate":"Create Task"})]})})]})]})})},Ys=({task:t,questions:a,onUpdate:s})=>{const[r,n]=h.useState(0),[o,l]=h.useState(t.quizAnswers||{}),[d,u]=h.useState(t.quizCompleted||!1),[y,b]=h.useState(t.quizScore||null),[k,x]=h.useState(!1),c=a[r],f=a.length,N=p=>{d||l(C=>({...C,[r+1]:p}))},E=p=>{d||l(C=>({...C,[r+1]:p}))},I=()=>{let p=0;return a.forEach((C,v)=>{const j=v+1,_=o[j];C.type==="identification"?_&&_.toString().toLowerCase().trim()===C.correct_answer.toString().toLowerCase().trim()&&p++:_!==void 0&&typeof _=="number"&&C.options[_]?.trim()===C.correct_answer?.trim()&&p++}),{correct:p,total:f}},z=async()=>{const p=I();b(p),u(!0),x(!0);try{await W(U(T,"tasks",t.id),{quizAnswers:o,quizScore:p,quizCompleted:!0}),s({...t,quizAnswers:o,quizScore:p,quizCompleted:!0})}catch(C){console.error("Error saving quiz:",C),alert("Failed to save results.")}finally{x(!1)}},O=async()=>{if(window.confirm("Reset your progress?")){x(!0);try{await W(U(T,"tasks",t.id),{quizAnswers:{},quizScore:null,quizCompleted:!1}),s({...t,quizAnswers:{},quizScore:null,quizCompleted:!1}),u(!1),b(null),l({}),n(0)}catch(p){console.error("Error resetting quiz:",p)}finally{x(!1)}}},S=p=>{switch(p){case"identification":return"bg-purple-50 text-purple-600 border-purple-100";case"situational":return"bg-orange-50 text-orange-600 border-orange-100";default:return"bg-blue-50 text-blue-600 border-blue-100"}},R=p=>{switch(p){case"identification":return"Identification";case"situational":return"Situational";default:return"Multiple Choice"}};return e.jsx("div",{className:"w-full h-full flex flex-col",children:d&&y?e.jsxs("div",{className:"flex flex-col items-center animate-in fade-in duration-300 py-4",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-50 dark:bg-yellow-900/20 rounded-full flex items-center justify-center mb-3",children:e.jsx(ns,{size:32,className:"text-yellow-500"})}),e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[Math.round(y.correct/y.total*100),"% Score"]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400 mb-6",children:["You got ",y.correct," out of ",y.total," correct"]}),e.jsxs("button",{onClick:O,disabled:k,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-100 dark:bg-zinc-800 hover:bg-gray-200 dark:hover:bg-zinc-700 text-gray-700 dark:text-zinc-200 rounded-xl text-sm font-bold transition-colors mb-8",children:[e.jsx(Gt,{size:16})," Retake Quiz"]}),e.jsxs("div",{className:"w-full space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Review Answers"}),a.map((p,C)=>{const v=o[C+1],j=p.correct_answer;let _=!1,g="Skipped";return p.type==="identification"?(g=v||"Skipped",_=g.toString().toLowerCase().trim()===j.toString().toLowerCase().trim()):(g=p.options[v]||"Skipped",_=g===j),e.jsxs("div",{className:`p-3 rounded-xl border text-sm ${_?"border-emerald-200 bg-emerald-50 dark:bg-emerald-900/10":"border-rose-200 bg-rose-50 dark:bg-rose-900/10"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("p",{className:"font-bold text-gray-800 dark:text-gray-200 flex-1 mr-2",children:[e.jsxs("span",{className:"text-gray-400 mr-1",children:[C+1,"."]})," ",p.question]}),e.jsx("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded border uppercase shrink-0 ${S(p.type)}`,children:p.type==="identification"?"ID":p.type==="situational"?"SIT":"MC"})]}),e.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[e.jsxs("p",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-xs uppercase w-12",children:"You:"}),e.jsx("span",{className:"flex-1 truncate",children:g}),_?e.jsx(gt,{size:14,className:"text-emerald-500 shrink-0"}):e.jsx(Qe,{size:14,className:"text-rose-500 shrink-0"})]}),!_&&e.jsxs("p",{className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400 font-medium",children:[e.jsx("span",{className:"font-semibold text-xs uppercase w-12 text-gray-500",children:"Answer:"})," ",j]})]})]},C)})]})]}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-1.5",children:[e.jsxs("span",{children:["Question ",r+1," of ",f]}),e.jsxs("span",{children:[Math.round((r+1)/f*100),"%"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-gray-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-teal-500 transition-all duration-300 ease-out",style:{width:`${(r+1)/f*100}%`}})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:`inline-block mb-2 text-[10px] font-bold px-2 py-0.5 rounded border uppercase tracking-wide ${S(c?.type)}`,children:R(c?.type)}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-relaxed",children:c?.question||"Loading Question..."})]}),e.jsx("div",{className:"flex-1 mb-6 overflow-y-auto",children:c?.type==="identification"?e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-4 top-3.5 text-gray-400",size:20}),e.jsx("input",{type:"text",value:o[r+1]||"",onChange:p=>E(p.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 focus:border-teal-500 focus:ring-2 focus:ring-teal-500/20 outline-none transition-all text-gray-900 dark:text-white",placeholder:"Type your answer here...",autoFocus:!0})]}),e.jsx("p",{className:"text-xs text-gray-400 ml-1",children:"Tip: Answers are not case-sensitive."})]}):e.jsx("div",{className:"space-y-2.5",children:c?.options.map((p,C)=>{const v=o[r+1]===C;return e.jsxs("button",{onClick:()=>N(C),className:`w-full text-left p-3.5 rounded-xl border transition-all flex items-center justify-between group
                                                ${v?"border-teal-500 bg-teal-50 dark:bg-teal-900/20 text-teal-800 dark:text-teal-200 shadow-sm":"border-gray-200 dark:border-zinc-700 hover:border-teal-300 hover:bg-gray-50 dark:hover:bg-zinc-900"}`,children:[e.jsx("span",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",children:p}),e.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center
                                                ${v?"bg-teal-500 border-teal-500":"border-gray-300 dark:border-gray-500"}`,children:v&&e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]},C)})})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-100 dark:border-zinc-800 mt-auto",children:[e.jsx("button",{onClick:()=>n(p=>Math.max(0,p-1)),disabled:r===0,className:"text-gray-500 dark:text-zinc-500 font-bold text-sm hover:text-gray-800 dark:hover:text-zinc-300 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Back"}),r<f-1?e.jsxs("button",{onClick:()=>n(p=>Math.min(f-1,p+1)),className:"bg-gray-900 dark:bg-white text-white dark:text-black px-5 py-2.5 rounded-lg font-bold text-sm flex items-center gap-2 hover:opacity-90 transition-opacity",children:["Next ",e.jsx(ht,{size:14})]}):e.jsx("button",{onClick:z,disabled:k,className:"bg-teal-600 hover:bg-teal-700 text-white px-6 py-2.5 rounded-lg font-bold text-sm shadow-md shadow-teal-600/20 transition-all",children:k?"Submitting...":"Finish Quiz"})]})]})})},Vs=({isOpen:t,onClose:a,task:s,onUpdate:r,onDelete:n})=>{if(!t||!s)return null;const[o,l]=h.useState("details"),[d,u]=h.useState(s.title),[y,b]=h.useState(s.description),[k,x]=h.useState(s.checklist||[]),[c,f]=h.useState(""),[N,E]=h.useState(!1),[I,z]=h.useState(!1),[O,S]=h.useState([]);h.useEffect(()=>{if(u(s.title),b(s.description),x(s.checklist||[]),E(!1),l("details"),s.quizDataJson)try{const i=typeof s.quizDataJson=="string"?JSON.parse(s.quizDataJson):s.quizDataJson;S(Array.isArray(i)?i:i.questions||[])}catch{S([])}else S([])},[s]);const R=()=>{c.trim()&&(x([...k,{title:c,isChecked:!1}]),f(""),E(!0))},p=i=>{const w=[...k];w[i].isChecked=!w[i].isChecked,x(w),E(!0)},C=i=>{x(k.filter((w,M)=>M!==i)),E(!0)},v=async()=>{z(!0);try{const i={title:d,description:y,checklist:k};await W(U(T,"tasks",s.id),i),r({...s,...i}),E(!1),a()}catch{alert("Failed to save changes")}finally{z(!1)}},j=()=>{n(s.id)},_=i=>{switch(i){case"Work":return"text-blue-600 bg-blue-50 border-blue-100 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-900";case"Personal":return"text-purple-600 bg-purple-50 border-purple-100 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-900";case"Academic":return"text-orange-600 bg-orange-50 border-orange-100 dark:bg-orange-900/20 dark:text-orange-300 dark:border-orange-900";default:return"text-gray-600 bg-gray-50 border-gray-200"}},g=()=>s.emoji==="brain"?e.jsx(X,{size:32,className:"text-pink-500"}):s.emoji==="document-text"?e.jsx(Z,{size:32,className:"text-teal-600"}):e.jsx(Le,{size:32,className:"text-gray-500"});return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-950 w-full max-w-3xl rounded-[24px] shadow-2xl border border-gray-100 dark:border-zinc-800 flex flex-col max-h-[90vh] overflow-hidden transition-all",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 dark:border-zinc-800 flex items-start gap-4 bg-white dark:bg-zinc-950 shrink-0",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-50 dark:bg-zinc-900 flex items-center justify-center border border-gray-100 dark:border-zinc-800 shrink-0 shadow-sm",children:g()}),e.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[e.jsx("input",{type:"text",value:d,onChange:i=>{u(i.target.value),E(!0)},className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-900 dark:text-white placeholder-gray-400 p-0 focus:ring-0 truncate",placeholder:"Task Title"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-md border uppercase tracking-wide ${_(s.category)}`,children:s.category}),e.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-medium text-gray-500 dark:text-zinc-400 bg-gray-50 dark:bg-zinc-900 px-2 py-0.5 rounded-md border border-gray-100 dark:border-zinc-800",children:[e.jsx(te,{size:10})," ",s.dueDate||"No Date"]}),e.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-mono text-gray-400 dark:text-zinc-600 px-1",children:[e.jsx(De,{size:10})," ",s.id.slice(0,6).toUpperCase()]})]})]}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:e.jsx(se,{size:20})})]}),O.length>0&&e.jsxs("div",{className:"px-6 border-b border-gray-100 dark:border-zinc-800 flex gap-6 shrink-0 bg-gray-50/50 dark:bg-zinc-900/50",children:[e.jsx("button",{onClick:()=>l("details"),className:`py-2.5 text-xs font-bold border-b-2 transition-all ${o==="details"?"text-teal-600 border-teal-600":"text-gray-500 border-transparent hover:text-gray-800"}`,children:"Task Details"}),e.jsxs("button",{onClick:()=>l("quiz"),className:`py-2.5 text-xs font-bold border-b-2 transition-all flex items-center gap-1.5 ${o==="quiz"?"text-pink-600 border-pink-600":"text-gray-500 border-transparent hover:text-gray-800"}`,children:[e.jsx(X,{size:14})," AI Quiz"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-white dark:bg-zinc-950",children:[o==="details"&&e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Description"}),e.jsx("textarea",{value:y,onChange:i=>{b(i.target.value),E(!0)},className:"w-full min-h-[100px] bg-gray-50 dark:bg-zinc-900/50 rounded-xl p-3 text-sm text-gray-700 dark:text-zinc-300 leading-relaxed border border-transparent focus:bg-white dark:focus:bg-zinc-900 focus:border-teal-500 focus:ring-2 focus:ring-teal-500/10 outline-none transition-all resize-none",placeholder:"No details provided."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Checklist"}),e.jsxs("span",{className:"text-[10px] font-bold text-teal-600 bg-teal-50 dark:bg-teal-900/20 px-1.5 py-0.5 rounded",children:[k.filter(i=>i.isChecked).length,"/",k.length]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:i=>f(i.target.value),onKeyDown:i=>i.key==="Enter"&&R(),className:"flex-1 bg-gray-50 dark:bg-zinc-900 rounded-lg px-3 py-2 text-xs border border-gray-200 dark:border-zinc-800 focus:border-teal-500 outline-none transition-all",placeholder:"Add a subtask..."}),e.jsx("button",{onClick:R,className:"p-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg transition-colors shadow-lg shadow-teal-600/20",children:e.jsx(oe,{size:16})})]}),e.jsxs("div",{className:"space-y-1",children:[k.map((i,w)=>e.jsxs("div",{className:"flex items-start gap-3 p-2 hover:bg-gray-50 dark:hover:bg-zinc-900 rounded-lg group transition-colors border border-transparent hover:border-gray-100 dark:hover:border-zinc-800",children:[e.jsx("button",{onClick:()=>p(w),className:`mt-0.5 w-4 h-4 rounded border flex items-center justify-center transition-all ${i.isChecked?"bg-teal-500 border-teal-500 text-white":"border-gray-300 hover:border-teal-500"}`,children:i.isChecked&&e.jsx(Ue,{size:10})}),e.jsx("span",{className:`text-xs flex-1 leading-relaxed ${i.isChecked?"text-gray-400 line-through":"text-gray-700 dark:text-zinc-300"}`,children:i.title}),e.jsx("button",{onClick:()=>C(w),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(G,{size:14})})]},w)),k.length===0&&e.jsx("p",{className:"text-xs text-gray-400 italic text-center py-2",children:"No checklist items yet."})]})]}),(s.pdfUrl||s.hasAttachment)&&e.jsxs("div",{className:"pt-3 border-t border-gray-100 dark:border-zinc-800",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-wider",children:"Attachment"}),e.jsxs("a",{href:s.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-3 rounded-xl bg-teal-50 dark:bg-teal-900/10 border border-teal-100 dark:border-teal-800/30 hover:bg-teal-100 dark:hover:bg-teal-900/20 transition-all group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white dark:bg-teal-900 flex items-center justify-center text-teal-600 shadow-sm",children:e.jsx(Z,{size:16})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-teal-900 dark:text-teal-100 line-clamp-1",children:s.pdfName||"Document"}),e.jsx("span",{className:"text-[10px] text-teal-600 dark:text-teal-400 font-medium",children:"PDF Document"})]})]}),e.jsx(kt,{size:14,className:"text-teal-400 group-hover:text-teal-600"})]})]})]}),o==="quiz"&&e.jsx("div",{className:"h-full",children:e.jsx(Ys,{task:s,questions:O,onUpdate:r})})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 dark:border-zinc-800 bg-gray-50/50 dark:bg-zinc-950 flex justify-between items-center shrink-0",children:[e.jsxs("button",{onClick:j,className:"flex items-center gap-1.5 text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-2 rounded-lg transition-colors font-bold text-[10px] uppercase tracking-wide",children:[e.jsx(G,{size:14}),"Delete"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 text-xs font-bold text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Close"}),N&&o==="details"&&e.jsx("button",{onClick:v,disabled:I,className:"px-5 py-2 bg-teal-600 hover:bg-teal-700 text-white text-xs font-bold rounded-lg shadow-lg shadow-teal-600/20 flex items-center gap-1.5 transition-all disabled:opacity-70",children:I?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx($e,{size:14})," Save"]})})]})]})]})})},Ks=({isOpen:t,onClose:a,onConfirm:s,isDeleting:r})=>t?e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-950 w-full max-w-sm rounded-3xl shadow-2xl border border-gray-100 dark:border-zinc-800 p-6 scale-100 animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4 text-red-600 dark:text-red-500",children:e.jsx(as,{size:24})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Delete this task?"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 leading-relaxed",children:"This action cannot be undone. This task will be permanently removed from your workspace."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"flex-1 py-3 rounded-xl text-sm font-bold text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-900 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:s,disabled:r,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-red-500/20 transition-all flex items-center justify-center gap-2 disabled:opacity-70",children:r?e.jsx("span",{children:"Deleting..."}):e.jsxs(e.Fragment,{children:[e.jsx(G,{size:16}),e.jsx("span",{children:"Delete"})]})})]})]})}):null,Js="https://api.cloudinary.com/v1_1/du1dwcrhb/image/upload",Qs="tasks_pdfs",Ws=({isOpen:t,onClose:a})=>{const[s,r]=h.useState(null),[n,o]=h.useState(!0),[l,d]=h.useState(!1),[u,y]=h.useState(""),[b,k]=h.useState(""),[x,c]=h.useState(""),[f,N]=h.useState(null),[E,I]=h.useState(null),[z,O]=h.useState(!1);h.useEffect(()=>{const v=async()=>{const j=ne.currentUser;if(j)try{const _=U(T,"users",j.uid),g=await ie(_);if(g.exists()){const i=g.data();r(i),y(i.username||j.displayName||""),k(i.course||""),c(i.hobbies||"")}else{const i={username:j.displayName,email:j.email,photoURL:j.photoURL,createdAt:new Date().toISOString()};r(i),y(i.username||"")}}catch(_){console.error("Error fetching profile:",_)}finally{o(!1)}};t&&(o(!0),v(),d(!1),N(null),I(null))},[t]);const S=v=>{const j=v.target.files[0];j&&(N(j),I(URL.createObjectURL(j)))},R=async v=>{const j=new FormData;j.append("file",v),j.append("upload_preset",Qs);try{return(await(await fetch(Js,{method:"POST",body:j})).json()).secure_url}catch(_){return console.error("Upload failed:",_),null}},p=async()=>{O(!0);const v=ne.currentUser;if(v)try{let j=s.photoURL;if(f){const g=await R(f);g&&(j=g)}const _=U(T,"users",v.uid);await W(_,{username:u,course:b,hobbies:x,photoURL:j}),await Ze(v,{displayName:u,photoURL:j}),r(g=>({...g,username:u,course:b,hobbies:x,photoURL:j})),d(!1)}catch(j){console.error("Error saving profile:",j),alert("Failed to save changes.")}finally{O(!1)}};if(!t)return null;const C=v=>v?new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-950 w-full max-w-2xl rounded-[32px] shadow-2xl border border-gray-100 dark:border-zinc-800 overflow-hidden flex flex-col relative transition-all",children:[!l&&e.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/40 backdrop-blur-md rounded-full text-white z-10 transition-colors",children:e.jsx(se,{size:20})}),n?e.jsx("div",{className:"h-96 flex items-center justify-center",children:e.jsx(Q,{size:32,className:"animate-spin text-teal-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-40 bg-gradient-to-r from-teal-500 to-emerald-500 relative",children:[e.jsx("div",{className:"absolute top-4 right-16 z-10",children:l?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-white/20 backdrop-blur-md rounded-xl text-white font-bold text-xs hover:bg-white/30 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:p,disabled:z,className:"px-4 py-2 bg-white text-teal-600 rounded-xl font-bold text-xs shadow-lg flex items-center gap-2 hover:bg-gray-50 transition-colors",children:[z?e.jsx(Q,{size:14,className:"animate-spin"}):e.jsx($e,{size:14}),"Save"]})]}):e.jsx("button",{onClick:()=>d(!0),className:"p-2 bg-white/20 backdrop-blur-md rounded-full text-white hover:bg-white/30 transition-colors",title:"Edit Profile",children:e.jsx(qt,{size:18})})}),e.jsx("div",{className:"absolute -bottom-12 left-1/2 -translate-x-1/2 group",children:e.jsxs("div",{className:"w-28 h-28 rounded-full border-[6px] border-white dark:border-zinc-950 bg-white dark:bg-zinc-900 overflow-hidden shadow-xl flex items-center justify-center relative",children:[E||s?.photoURL?e.jsx("img",{src:E||s.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(ee,{size:48,className:"text-gray-400"}),l&&e.jsxs("label",{className:"absolute inset-0 bg-black/40 flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(ct,{size:24,className:"text-white drop-shadow-md"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:S})]})]})})]}),e.jsxs("div",{className:"pt-16 pb-10 px-8 text-center",children:[e.jsx("div",{className:"mb-2 flex justify-center",children:l?e.jsx("input",{type:"text",value:u,onChange:v=>y(v.target.value),className:"text-2xl font-extrabold text-center bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl px-4 py-2 focus:ring-2 focus:ring-teal-500 outline-none w-full max-w-xs text-gray-900 dark:text-white",placeholder:"Enter Username"}):e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:s?.username||"User"})}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("span",{className:"px-4 py-1.5 rounded-full bg-teal-50 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 text-xs font-bold uppercase tracking-wide border border-teal-100 dark:border-teal-900 flex items-center gap-1.5",children:[e.jsx(Kt,{size:14}),s?.role||"Member"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-left",children:[e.jsx(Se,{icon:e.jsx(At,{size:20}),label:"Email",value:s?.email,readOnly:!0}),e.jsx(Ie,{icon:e.jsx(We,{size:20}),label:"Course",value:b,isEditing:l,onChange:v=>k(v.target.value),originalValue:s?.course}),e.jsx(Ie,{icon:e.jsx(Xe,{size:20}),label:"Hobbies",value:x,isEditing:l,onChange:v=>c(v.target.value),originalValue:s?.hobbies}),e.jsx(Se,{icon:e.jsx(te,{size:20}),label:"Joined",value:C(s?.createdAt),readOnly:!0})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-zinc-800 bg-gray-50 dark:bg-zinc-900/50 flex justify-center",children:e.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["UID: ",s?.uid?.slice(0,8),"..."]})})]})]})})},Se=({icon:t,label:a,value:s})=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-gray-50 dark:bg-zinc-900 border border-gray-100 dark:border-zinc-800",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white dark:bg-zinc-800 flex items-center justify-center text-gray-400 dark:text-zinc-500 shadow-sm shrink-0",children:t}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-0.5",children:a}),e.jsx("p",{className:"text-base font-bold text-gray-900 dark:text-white truncate",children:s||"Not set"})]})]}),Ie=({icon:t,label:a,value:s,isEditing:r,onChange:n,originalValue:o})=>e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-2xl border transition-all
        ${r?"bg-white dark:bg-zinc-950 border-teal-500 ring-1 ring-teal-500/20":"bg-gray-50 dark:bg-zinc-900 border-gray-100 dark:border-zinc-800"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white dark:bg-zinc-800 flex items-center justify-center text-gray-400 dark:text-zinc-500 shadow-sm shrink-0",children:t}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-0.5",children:a}),r?e.jsx("input",{type:"text",value:s,onChange:n,className:"w-full bg-transparent border-b border-gray-200 dark:border-zinc-700 focus:border-teal-500 outline-none text-base font-bold text-gray-900 dark:text-white pb-0.5",placeholder:`Enter ${a}`}):e.jsx("p",{className:"text-base font-bold text-gray-900 dark:text-white truncate",children:o||"Not set"})]})]}),aa=()=>{const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[n,o]=h.useState(!1),[l,d]=h.useState(!1),[u,y]=h.useState(null),[b,k]=h.useState(null),[x,c]=h.useState(!1),[f,N]=h.useState(()=>{const g=localStorage.getItem("cached_tasks");return g?JSON.parse(g):[]}),[E,I]=h.useState(()=>!localStorage.getItem("cached_tasks")),[z,O]=h.useState(null),S=Ae(),R=Oe();h.useEffect(()=>{const g=Me(R,i=>{if(i){O(i);const w=et(de(T,"tasks"),st("userId","==",i.uid),tt("createdAt","desc")),M=at(w,D=>{const V=D.docs.map(K=>({id:K.id,...K.data()}));N(V),localStorage.setItem("cached_tasks",JSON.stringify(V)),I(!1)},D=>{console.error("Error fetching tasks:",D),I(!1)});return()=>M()}else S("/login")});return()=>g()},[S]);const p=async g=>{if(z)try{await rt(de(T,"tasks"),{...g,userId:z.uid,createdAt:new Date,completed:!1})}catch(i){console.error("Error adding task: ",i),alert("Failed to save task.")}},C=g=>{k(g)},v=async()=>{if(b){c(!0);try{await nt(U(T,"tasks",b)),u?.id===b&&o(!1),k(null)}catch(g){console.error("Error deleting task: ",g),alert("Failed to delete task.")}finally{c(!1)}}},j=g=>{y(g),o(!0)},_=g=>{N(i=>{const w=i.map(M=>M.id===g.id?g:M);return localStorage.setItem("cached_tasks",JSON.stringify(w)),w})};return e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-zinc-950 transition-colors duration-300 overflow-hidden",children:[e.jsx(us,{isOpen:s,onClose:()=>r(!1),onOpenProfile:()=>d(!0)}),e.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[e.jsxs("header",{className:"h-16 border-b border-gray-200 dark:border-zinc-800 flex items-center justify-between px-4 md:px-8 bg-white/50 dark:bg-zinc-950/50 backdrop-blur-md shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r(!0),className:"p-2 -ml-2 mr-1 rounded-xl text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-800 md:hidden",children:e.jsx(Mt,{size:20})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Dashboard"})]}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white px-3 md:px-4 py-2 rounded-xl text-sm font-bold transition-colors shadow-lg shadow-teal-600/20",children:[e.jsx(oe,{size:18}),e.jsx("span",{className:"hidden md:inline",children:"New Task"}),e.jsx("span",{className:"md:hidden",children:"New"})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-4 md:p-8 pb-24 md:pb-8",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-extrabold text-gray-900 dark:text-white mb-2",children:["Hello, ",z?.displayName?z.displayName.split(" ")[0]:"Builder","."]}),e.jsxs("p",{className:"text-sm md:text-base text-gray-600 dark:text-zinc-400",children:["You have ",e.jsx("span",{className:"font-bold text-teal-600",children:f.filter(g=>!g.completed).length})," active tasks."]})]}),E?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Q,{size:40,className:"animate-spin text-teal-600"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[f.map(g=>e.jsx(hs,{task:g,onDelete:C,onClick:()=>j(g)},g.id)),f.length===0&&e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center h-64 border-2 border-dashed border-gray-200 dark:border-zinc-800 rounded-3xl bg-gray-50/50 dark:bg-zinc-900/50",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(oe,{size:32,className:"text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No tasks found."}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Create one to get started!"})]})]})]}),e.jsx(Bs,{isOpen:t,onClose:()=>a(!1),onSave:p}),e.jsx(Vs,{isOpen:n,onClose:()=>o(!1),task:u,onUpdate:_,onDelete:C}),e.jsx(Ks,{isOpen:!!b,onClose:()=>k(null),onConfirm:v,isDeleting:x}),e.jsx(Ws,{isOpen:l,onClose:()=>d(!1)})]})]})};export{aa as default};
